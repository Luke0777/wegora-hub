@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --radius-sm: calc(var(--radius) * 0.5);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) * 1.5);
  --radius-xl: calc(var(--radius) * 2);
  --radius-2xl: calc(var(--radius) * 3);
  --radius-full: 9999px;
}

@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    /* Prevent text size adjustment on iOS */
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    /* Prevent horizontal scrolling */
    overflow-x: hidden;
  }

  /* Hide scrollbar for Chrome, Safari and Opera */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Line clamp utilities */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
    line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    line-clamp: 3;
  }

  /* Improved touch targets for mobile */
  @media (max-width: 768px) {
    input, button, select, textarea {
      font-size: 16px; /* Prevent zoom on iOS */
    }
  }

  /* Smooth transitions */
  button, input, select, textarea {
    transition: all 0.2s ease-in-out;
  }

  /* Focus styles for accessibility */
  button:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }

  /* Date input styling improvements */
  input[type="date"] {
    cursor: pointer;
    position: relative;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--input));
    border-radius: calc(var(--radius) * 1);
    min-height: 40px;
    padding: 8px 12px;
    padding-right: 40px; /* Make space for calendar icon */
  }

  /* Show placeholder when no value */
  input[type="date"]:not([value]),
  input[type="date"][value=""] {
    color: transparent !important;
  }

  /* When focused or has value, show normal text color */
  input[type="date"]:focus,
  input[type="date"][value]:not([value=""]) {
    color: hsl(var(--foreground)) !important;
  }

  /* Style the calendar icon */
  input[type="date"]::-webkit-calendar-picker-indicator {
    position: absolute;
    top: 50%;
    right: 32px; /* Move left to make space for clear button */
    transform: translateY(-50%);
    opacity: 0.6;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    background-size: 16px;
    width: 16px;
    height: 16px;
    filter: invert(0.5);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3e%3cpath fill-rule='evenodd' d='M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z' clip-rule='evenodd'/%3e%3c/svg%3e");
  }

  input[type="date"]:hover::-webkit-calendar-picker-indicator {
    background-color: hsl(var(--muted));
    opacity: 0.8;
    filter: invert(0.3);
  }

  input[type="date"]:focus::-webkit-calendar-picker-indicator {
    opacity: 1;
    filter: invert(0.2);
  }

  /* Spinner animation for loading states */
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .spinner {
    animation: spin 1s linear infinite;
  }

  /* Ensure proper text color in all date input parts */
  input[type="date"]::-webkit-datetime-edit,
  input[type="date"]::-webkit-datetime-edit-text,
  input[type="date"]::-webkit-datetime-edit-month-field,
  input[type="date"]::-webkit-datetime-edit-day-field,
  input[type="date"]::-webkit-datetime-edit-year-field {
    color: inherit;
    padding: 0 2px;
  }

  /* Hide the ugly default date format when empty */
  input[type="date"]:not([value])::-webkit-datetime-edit,
  input[type="date"][value=""]::-webkit-datetime-edit {
    color: transparent !important;
  }

  /* Better focus ring for date inputs */
  input[type="date"]:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    border-color: hsl(var(--ring));
  }

  /* Custom date input wrapper for better UX */
  .date-input-wrapper {
    position: relative;
    display: inline-block;
    width: 100%;
  }

  /* Hide native date picker when showing custom placeholder */
  .date-input-wrapper input[type="date"]:not([value])::-webkit-datetime-edit,
  .date-input-wrapper input[type="date"][value=""]::-webkit-datetime-edit {
    visibility: hidden;
  }

  .date-input-wrapper input[type="date"]:focus::-webkit-datetime-edit {
    visibility: visible;
  }

  /* Empty date input styling */
  .date-input-empty::-webkit-datetime-edit {
    color: transparent !important;
  }

  .date-input-empty:focus::-webkit-datetime-edit {
    color: inherit !important;
  }
}

:root {
  /* Base colors that define the core visual identity */
  --background: 0 0% 100%;
  --foreground: 0 0% 4%;

  --card: 0 0% 100%;
  --card-foreground: 0 0% 4%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 4%;

  /* Action colors that represent interactive elements */
  --primary: 214 100% 50%;
  --primary-foreground: 0 0% 100%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 0 0% 4%;
  --accent: 237 62% 67%;
  --accent-foreground: 0 0% 100%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  /* Supporting UI colors for various states and elements */
  --muted: 210 40% 98%;
  --muted-foreground: 215 16% 47%;
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 214 100% 50%;

  /* ═══════════════════════════════════════════════════════════════════════════
     TEXT GREY SYSTEM
     Semantic grey tokens for consistent text hierarchy
     Based on Slate palette with subtle blue undertone
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Primary text - use foreground (--foreground: 0 0% 4%) */

  /* Secondary text - for subheadings, descriptions, body subtext */
  --text-secondary: 215 16% 47%;        /* #64748b - Slate 500, 4.68:1 contrast ✓ */

  /* Tertiary text - for eyebrow labels, hints, metadata */
  /* WCAG AA: Darkened from 65% to 46% for 4.5:1 contrast */
  --text-tertiary: 215 20% 46%;         /* #5b6b80 - 4.54:1 contrast ✓ */

  /* Muted text - for placeholders, disabled states (3:1 minimum per WCAG) */
  /* WCAG AA: Darkened from 75% to 55% for 3.5:1 contrast */
  --text-muted: 215 14% 55%;            /* #7d8a99 - 3.54:1 contrast ✓ */

  /* Border radius applied throughout the UI for consistent shape language */
  --radius: 0.5rem;

  /* ═══════════════════════════════════════════════════════════════════════════
     ILLUSTRATION TOKENS
     Standardized values for SVG illustrations to ensure visual consistency

     SEMANTIC COLOR RULE:
     - Blau = WEG-Bereich (Hausverwaltung)
     - Grün = Eigentümer-Bereich
     - Use --illustration-area-accent which auto-switches based on data-area
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Stroke widths - use only these 3 levels */
  --illustration-stroke-thin: 1.5;      /* Detail lines, secondary strokes */
  --illustration-stroke-default: 2;     /* Primary strokes, main outlines */
  --illustration-stroke-bold: 3;        /* Emphasis, connection lines */

  /* Border radius for illustration elements */
  --illustration-radius-sm: 2;          /* Small elements, badges */
  --illustration-radius-md: 4;          /* Cards, buttons in illustrations */
  --illustration-radius-lg: 8;          /* Large containers */

  /* Opacity levels for decorative elements */
  --illustration-opacity-subtle: 0.1;   /* Background decorations */
  --illustration-opacity-light: 0.2;    /* Secondary elements */
  --illustration-opacity-medium: 0.4;   /* Supporting elements */
  --illustration-opacity-strong: 0.6;   /* Prominent decorations */

  /* Base colors mapped to existing design tokens */
  --illustration-ink: var(--foreground);
  --illustration-ink-muted: var(--muted-foreground);
  --illustration-surface: var(--background);
  --illustration-border: var(--border);

  /* ─────────────────────────────────────────────────────────────────────────────
     WEG COLOR PALETTE
     Central definition - change here to update everywhere
     ───────────────────────────────────────────────────────────────────────────── */
  --weg-50: 214 100% 97%;                           /* #eff6ff - Backgrounds */
  --weg-100: 214 95% 93%;                           /* #dbeafe */
  --weg-200: 214 86% 85%;                           /* #bfdbfe - Borders */
  --weg-300: 213 94% 68%;                           /* #93c5fd */
  --weg-400: 213 94% 58%;                           /* #60a5fa */
  --weg-450: 218 82% 51%;                           /* #3b82f6 - Between 400/500 */
  --weg-500: 224 70% 44%;                           /* #2956b8 - Primary (softer) */
  --weg-600: 224 76% 48%;                           /* #1d4ed8 - Hover/Dark */
  --weg-700: 224 76% 40%;                           /* #1e40af */
  --weg-800: 226 71% 31%;                           /* #1e3a8a */
  --weg-900: 226 57% 21%;                           /* #172554 */

  /* ─────────────────────────────────────────────────────────────────────────────
     OWNER COLOR PALETTE
     Central definition - change here to update everywhere
     Lightness progression aligned with WEG palette
     ───────────────────────────────────────────────────────────────────────────── */
  --owner-50: 180 60% 95%;                          /* #e6f7f7 - Backgrounds */
  --owner-100: 180 55% 88%;                         /* #c4ecec */
  --owner-200: 180 50% 78%;                         /* #9ad9d9 - Borders */
  --owner-300: 180 55% 58%;                         /* #5abfbf */
  --owner-400: 180 70% 42%;                         /* #20a3a3 */
  --owner-500: 180 100% 25%;                        /* #008080 - Primary */
  --owner-600: 180 100% 22%;                        /* #007070 - Hover/Dark */
  --owner-700: 180 90% 18%;                         /* #055c5c */
  --owner-800: 180 80% 14%;                         /* #074747 */
  --owner-900: 180 70% 10%;                         /* #083333 */

  /* ─────────────────────────────────────────────────────────────────────────────
     AREA-BASED COLORS (semantic)
     These define the two main product areas
     Hero diagrams are conceptual/atmospheric, not UI-loud:
     - Desaturated by ~30% from brand colors
     - Lighter for "overview" feel
     - Services below can be crisper
     ───────────────────────────────────────────────────────────────────────────── */
  --illustration-weg: var(--weg-500);               /* Blue - WEG/Hausverwaltung */
  --illustration-owner: var(--owner-500);           /* Teal - Eigentümer Branding */

  /* Context-aware accent - DEFAULT is WEG (blue) */
  --illustration-area-accent: var(--illustration-weg);

  /* Secondary accent for contrast within same area */
  --illustration-area-secondary: var(--illustration-owner);

  /* ─────────────────────────────────────────────────────────────────────────────
     STATUS COLORS (non-semantic, purely functional)
     These are for UI states, NOT for area identification
     ───────────────────────────────────────────────────────────────────────────── */
  --illustration-success: 160 84% 39%;              /* #10B981 - Success Green (NOT Eigentümer!) */
  --illustration-warning: 24 95% 53%;               /* #F97316 - Orange */
  --illustration-danger: 0 84% 60%;                 /* #E53E3E - Red */
  --illustration-info: 207 90% 54%;                 /* #3182CE - Info Blue */
  --illustration-purple: 258 90% 66%;               /* #8B5CF6 - Purple (Vorgänge) */
}

/* ═══════════════════════════════════════════════════════════════════════════════
   AREA CONTEXT OVERRIDES
   Set data-area="weg" or data-area="owner" on parent containers
   to automatically switch illustration accent colors
   ═══════════════════════════════════════════════════════════════════════════════ */

/* WEG-Bereich (Hausverwaltung) - Blau dominant */
[data-area="weg"] {
  --illustration-area-accent: var(--illustration-weg);
  --illustration-area-secondary: var(--illustration-owner);
}

/* Eigentümer-Bereich - Grün dominant */
[data-area="owner"] {
  --illustration-area-accent: var(--illustration-owner);
  --illustration-area-secondary: var(--illustration-weg);
}
